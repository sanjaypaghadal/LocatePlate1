@model Reservation

@{ Layout = null;}
@if (Model?.MenuItems != null && Model.MenuItems.Any())
{

    <input type="hidden" name="TotalPrice" value="@Model.GrandTotal" />
    <input type="hidden" name="TotalTax" value="@Model.Tax" />
    <input type="hidden" name="PromoCode" value="@(Model.PromoCode??string.Empty)" />
    <input type="hidden" name="SubTotal" value="@Model.SubTotal" />
    <input type="hidden" name="IsValidPromoCode" value="@Model.IsValidPromoCode.ToString()" />
    <input type="hidden" name="UserName" value="" />
    <input type="hidden" name="UserId" value="@Guid.Empty" />
    <h4 class="text-center bold-600 py-2 text-white bg-primary font-15 border-radius-4">Pre-order Food</h4>

    @for (int i = 0; i < Model.MenuItems.Count; i++)
    {
        var item = Model.MenuItems[i];
        <input type="hidden" name="MenuItems[@i].Name" value="@item.Name" />
        <input type="hidden" name="MenuItems[@i].Quantity" value="@item.Quantity" />
        <input type="hidden" name="MenuItems[@i].Price" value="@Math.Round(item.Price,2)" />
        <input type="hidden" name="MenuItems[@i].MenuId" value="@item.Id" />
        <input type="hidden" name="MenuItems[@i].SpecialInstruction" value="@item.SpecialInstruction" />

        <div class="row border-bottom py-2 font-14 text-dark align-items-center">
            <div class="col-md-5 font-16 order-name">
                <h4 class="mb-1 bold-600 font-13 text-wrap">@item.Name</h4>
            </div>
            @*<div class="remove-menu-item font-16 text-grey mr-2" data-id="@item.Id" data-restaurantId="@item.RestaurantId"><i class="fa fa-trash"></i></div>*@
            <div class="checkout-cart col-md-4">
                <div class="quatity-section border-radius-4">
                    <div class="value-button decrease-button" value="Decrease Value">-</div>
                    <input type="number" class="font-12 number" data-menuitem="@item.Id" name="Quantity" value="@item.Quantity" />
                    <div class="value-button increate-button" value="Increase Value">+</div>
                </div>
            </div>
            <div class="ml-2">$@Math.Round(item.Price, 2)</div>
        </div>
    }

    <div class="apply-offers my-3">
        @if (Model.IsValidPromoCode)
        {
            <div class="applied-promo mb-3 border-radius-4 d-flex">
                <p class="tag text-primary mb-0">Coupon @Model.PromoCode applied!</p>
                <button type="button" class="btn bg-primary text-white font-14 border-radius-0 bold-600" id="remove-promo">
                    <i class="fa fa-remove"></i>
                </button>
            </div>
        }
        else if (!Model.IsValidPromoCode && Model.HavingPromoCode && Model.IsMinimumPriceNotMeet)
        {
            <div><p class="bg-outline-primary text-primary">Add $@(Math.Round(Model.MinimumPrice-Model.SubTotal,2)) item to apply! </p></div>
        }
        else if (!Model.IsValidPromoCode && Model.HavingPromoCode && !Model.IsMinimumPriceNotMeet)
        {
            <div>
                <p class="bg-outline-primary text-primary">Promo code invalid! </p>
            </div>
        }

        <div class="d-flex mb-3 promo-code">
            <input type="text" placeholder="Enter promo code" class="form-control border-radius-0 font-14 bg-outline-primary border-right-0" id="promo-code">
            <button type="button" class="btn bg-primary text-white font-14 border-radius-0 bold-600" id="apply-promo">Apply</button>
        </div>

        <input type="hidden" name="IsFoodOrder" value="true" />

        <div class="d-flex justify-content-between">
            <h4 class="text-dark">Subtotal</h4>
            <div>$@Math.Round(Model.SubTotal, 2)</div>
        </div>
        <div class="d-flex justify-content-between">
            <h4 class="text-dark">Tax</h4>
            <div>$@Math.Round(Model.Tax, 2)</div>
        </div>
        @if (Model.Discount != 0.0)
        {
            <div class="d-flex justify-content-between">
                <h4 class="text-dark">Discount</h4>
                <div>$@Math.Round(Model.Discount, 2)</div>
            </div>
        }
        <div class="d-flex justify-content-between">
            <h3 class="bold-600 text-dark">Grand Total</h3>
            <div>$@Math.Round(Model.GrandTotal, 2)</div>
        </div>
    </div>
}